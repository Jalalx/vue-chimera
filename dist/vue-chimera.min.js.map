{"version":3,"file":"vue-chimera.min.js","sources":["../src/utils.js","../node_modules/p-debounce/index.js","../src/Resource.js","../src/NullResource.js","../src/cache/WebStorageCache.js","../src/cache/index.js","../src/VueChimera.js","../src/mixin.js","../src/index.js","../src/NuxtPlugin.js"],"sourcesContent":["import Axios from 'axios'\n\nexport function isPlainObject (value) {\n  const OBJECT_STRING = '[object Object]'\n  return typeof value === 'object' && Object.prototype.toString(value) === OBJECT_STRING\n}\n\nexport function remove (arr, item) {\n  if (arr.length) {\n    const index = arr.indexOf(item)\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\nexport function createAxios (config) {\n  if (config && typeof config.request === 'function') {\n    return config\n  }\n  if (isPlainObject(config)) {\n    return Axios.create(config)\n  }\n  if (typeof config === 'function') {\n    let axios = config()\n    return createAxios(axios)\n  }\n  return Axios\n}\n","'use strict';\nmodule.exports = (fn, wait, opts) => {\n\tif (!Number.isFinite(wait)) {\n\t\tthrow new TypeError('Expected `wait` to be a finite number');\n\t}\n\n\topts = opts || {};\n\n\tlet leadingVal;\n\tlet timer;\n\tlet resolveList = [];\n\n\treturn function () {\n\t\tconst ctx = this;\n\t\tconst args = arguments;\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst runImmediately = opts.leading && !timer;\n\n\t\t\tclearTimeout(timer);\n\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\ttimer = null;\n\n\t\t\t\tconst res = opts.leading ? leadingVal : fn.apply(ctx, args);\n\n\t\t\t\tfor (resolve of resolveList) {\n\t\t\t\t\tresolve(res);\n\t\t\t\t}\n\n\t\t\t\tresolveList = [];\n\t\t\t}, wait);\n\n\t\t\tif (runImmediately) {\n\t\t\t\tleadingVal = fn.apply(ctx, args);\n\t\t\t\tresolve(leadingVal);\n\t\t\t} else {\n\t\t\t\tresolveList.push(resolve);\n\t\t\t}\n\t\t});\n\t};\n};\n","import { isPlainObject, createAxios } from './utils'\nimport pDebounce from 'p-debounce'\nimport Axios from 'axios'\nconst { CancelToken } = Axios\n\nexport const EVENT_SUCCESS = 'success'\nexport const EVENT_ERROR = 'error'\nexport const EVENT_CANCEL = 'cancel'\nexport const EVENT_LOADING = 'loading'\nexport const EVENT_TIMEOUT = 'timeout'\n\nexport default class Resource {\n  static from (value, baseOptions = {}) {\n    if (value == null) throw new Error('Cannot create resource from `null`')\n\n    if (value instanceof Resource) { return value }\n\n    if (typeof value === 'string') { return new Resource(value, null, baseOptions) }\n\n    if (isPlainObject(value)) {\n      const { url, method, ...options } = value\n\n      if (options.cache) {\n        if (!baseOptions.cache) throw new Error('Pre definition of cache should be on Chimera instance options')\n        if (typeof options.cache !== 'object') throw Error('Cache should be an object')\n        let cache = Object.create(baseOptions.cache)\n        options.cache = Object.assign(cache, options.cache)\n      }\n\n      return new Resource(url, method, Object.assign({}, baseOptions, options))\n    }\n  }\n\n  constructor (url, method, options) {\n    options = options || {}\n    method = method ? method.toLowerCase() : 'get'\n    if (method &&\n      ['get', 'post', 'put', 'patch', 'delete'].indexOf(method) === -1) {\n      throw new Error('Bad Method requested: ' + method)\n    }\n\n    this.axios = createAxios(options.axios)\n\n    this.requestConfig = {\n      url: url,\n      method: method ? method.toLowerCase() : 'get',\n      headers: options.headers || {},\n      cancelToken: new CancelToken(c => { this._canceler = c }),\n      timeout: options.timeout || undefined\n    }\n\n    this.requestConfig[this.requestConfig.method === 'get' ? 'params' : 'data'] = options.params\n\n    this._loading = false\n    this._status = null\n    this._data = null\n    this._headers = null\n    this._error = null\n    this._lastLoaded = null\n    this._eventListeners = {}\n    this.keepData = !!options.keepData\n    this.cache = options.cache\n\n    this.ssrPrefetched = false\n    this.cacheHit = false\n\n    this.prefetch = typeof options.prefetch === 'string' ? options.prefetch.toLowerCase() === method : Boolean(options.prefetch)\n    this.ssrPrefetch = options.ssrPrefetch\n    this.fetchDebounced = pDebounce(this.fetch.bind(this), options.debounce || 80, { leading: true })\n\n    // Set Transformers\n    if (options.transformer) {\n      if (typeof options.transformer === 'function') {\n        this.setTransformer(options.transformer)\n      } else if (typeof options.transformer === 'object') {\n        this.setResponseTransformer(options.transformer.response)\n        this.setErrorTransformer(options.transformer.error)\n      }\n    }\n    this.responseTransformer = this.responseTransformer || (r => r)\n    this.errorTransformer = this.errorTransformer || (r => r)\n\n    // Set interval.\n    if (options.interval) {\n      this.startInterval(options.interval)\n    }\n\n    // Set Events\n    if (typeof options.on === 'object' && options.on) {\n      for (let key in options.on) {\n        this.on(key, options.on[key])\n      }\n    }\n  }\n\n  setResponseTransformer (transformer) {\n    this.responseTransformer = transformer\n  }\n\n  setErrorTransformer (transformer) {\n    this.errorTransformer = transformer\n  }\n\n  setTransformer (transformer) {\n    this.responseTransformer = transformer\n    this.errorTransformer = transformer\n  }\n\n  startInterval (ms) {\n    if (typeof process !== 'undefined' && process.server) return\n\n    if (ms) this._interval = ms\n    this.stopInterval()\n    this._interval_id = setInterval(() => this.reload(true), this._interval)\n  }\n\n  stopInterval () {\n    if (this._interval_id) clearInterval(this._interval_id)\n  }\n\n  on (event, handler) {\n    let listeners = this._eventListeners[event] || []\n    listeners.push(handler)\n    this._eventListeners[event] = listeners\n    return this\n  }\n\n  bindListeners (obj) {\n    Object.keys(this._eventListeners).forEach(key => {\n      (this._eventListeners[key] || []).forEach((handler, i) => {\n        this._eventListeners[key][i] = handler.bind(obj)\n      })\n    })\n  }\n\n  emit (event) {\n    (this._eventListeners[event] || []).forEach(handler => {\n      handler(this)\n    })\n  }\n\n  fetch (force, extraData) {\n    return new Promise((resolve, reject) => {\n      if (this.cache && !force) {\n        let cacheResult = this.cache.assignCache(this)\n        if (cacheResult) {\n          this.cacheHit = true\n          return resolve(cacheResult._data)\n        }\n      }\n\n      this._loading = true\n      this.emit(EVENT_LOADING)\n\n      // Assign Extra data\n      let requestConfig = Object.assign({}, this.requestConfig, typeof extraData === 'object' ? {\n        [this.requestConfig.method === 'get' ? 'params' : 'data']: extraData\n      } : {})\n\n      this.axios.request(requestConfig).then(res => {\n        this._error = null\n        this._loading = false\n        this._lastLoaded = new Date()\n        this._status = res.status\n        this._data = res.data ? this.responseTransformer(res.data) : null\n        this._headers = res.headers || {}\n        this.cache && this.cache.set(this)\n        this.emit(EVENT_SUCCESS)\n        resolve(this._data)\n      }).catch(err => {\n        this._data = null\n        this._loading = false\n        const res = err.response\n        if (res) {\n          this._status = res.status\n          this._error = res.data = res.data ? this.errorTransformer(res.data) : true\n          this._headers = res.headers || {}\n        } else {\n          this._status = 0\n          this._error = true\n          this._headers = {}\n        }\n        if (this.cache && this.cache.strategy === 'network-first') {\n          this.cache.assignCache(this)\n          this.cacheHit = true\n          return resolve(this._data)\n        }\n        if (err.message && !err.response && err.message.indexOf('timeout') !== -1) {\n          err.timeout = true\n          this.emit(EVENT_TIMEOUT)\n        } else if (Axios.isCancel(err)) {\n          err.cancel = true\n          this.emit(EVENT_CANCEL)\n        } else {\n          this.emit(EVENT_ERROR)\n        }\n        reject(err)\n      })\n    })\n  }\n\n  reload (force) {\n    return this.fetchDebounced(force)\n  }\n\n  execute () {\n    return this.fetchDebounced(true)\n  }\n\n  send (extra) {\n    return this.fetchDebounced(true, extra)\n  }\n\n  cancel (unload) {\n    this.stopInterval()\n    if (unload) this._data = null\n    if (typeof this._canceler === 'function') this._canceler()\n    this.requestConfig.cancelToken = new CancelToken(c => { this._canceler = c })\n  }\n\n  stop () {\n    this.cancel()\n  }\n\n  toJSON () {\n    const json = {};\n    ['_loading', '_status', '_data', '_headers', '_error', '_lastLoaded', 'ssrPrefetched'].forEach(key => {\n      json[key] = this[key]\n    })\n    return json\n  }\n\n  get loading () {\n    return this._loading\n  }\n\n  get status () {\n    return this._status\n  }\n\n  get data () {\n    return this._data\n  }\n\n  get headers () {\n    return this._headers\n  }\n\n  get error () {\n    return this._error\n  }\n\n  get lastLoaded () {\n    return this._lastLoaded\n  }\n}\n","import Resource from './Resource'\n\nexport default class NullResource extends Resource {\n  fetch (force) {\n    return Promise.reject(new Error('Null Resource'))\n  }\n\n  cancel () {}\n\n  get loading () {\n    return false\n  }\n\n  get status () {\n    return 0\n  }\n\n  get data () {\n    return null\n  }\n\n  get error () {\n    return null\n  }\n\n  get lastLoaded () {\n    return null\n  }\n}\n","export default class WebStorageCache {\n  constructor (options) {\n    if (typeof window !== 'undefined') {\n      const store = String(options.store).replace(/[\\s-]/g).toLowerCase()\n      this.storage = store === 'sessionstorage' ? window.sessionStorage : window.localStorage\n    }\n\n    if (!this.storage) throw Error('LocalStorageCache: Local storage is not available.')\n\n    this.defaultExpiration = options.defaultExpiration || 60000\n  }\n\n  getObjectStore () {\n    const store = this.storage.getItem('_chimera')\n    return store ? JSON.parse(store) : {}\n  }\n\n  setObjectStore (x) {\n    this.storage.setItem('_chimera', JSON.stringify(x))\n  }\n\n  clear () {\n    this.storage.removeItem('_chimera')\n  }\n\n  /**\n   *\n   * @param key         Key for the cache\n   * @param value       Value for cache persistence\n   * @param expiration  Expiration time in milliseconds\n   */\n  setItem (key, value, expiration) {\n    const store = this.getObjectStore()\n    store[key] = {\n      expiration: Date.now() + (expiration || this.defaultExpiration),\n      value\n    }\n    this.setObjectStore(store)\n  }\n\n  /**\n   * If Cache exists return the Parsed Value, If Not returns {null}\n   *\n   * @param key\n   */\n  getItem (key) {\n    const store = this.getObjectStore()\n    let item = store[key]\n\n    if (item && item.value && Date.now() <= item.expiration) { return item.value }\n\n    this.removeItem(key)\n    return null\n  }\n\n  removeItem (key) {\n    const store = this.getObjectStore()\n    delete store[key]\n    this.setObjectStore(store)\n  }\n\n  keys () {\n    return Object.keys(this.getObjectStore())\n  }\n\n  length () {\n    return this.keys().length\n  }\n}\n","import WebStorageCache from './WebStorageCache'\n\nexport default class Cache {\n  static from (options, vm) {\n    if (!options) return null\n    let { store } = options\n\n    return new Cache(vm, options.strategy || 'stale', store)\n  }\n\n  constructor (vm, strategy, store) {\n    this.strategy = strategy\n    this.store = store\n    this.vm = vm\n  }\n\n  get (r) {\n    return this.store.getItem(this.getCacheKey(r))\n  }\n\n  set (r, value) {\n    value = value || r.toJSON()\n    delete value.ssrPrefetched\n    this.store.setItem(this.getCacheKey(r), value)\n  }\n\n  assignCache (r, value) {\n    if (!value) value = this.get(r)\n\n    const strategy = this.strategy\n    const assign = () => {\n      Object.assign(r, value)\n    }\n\n    if (value) {\n      if (strategy === 'cache-first') {\n        assign()\n        return r\n      } else if (this.strategy === 'network-first') {\n        if ((typeof navigator !== 'undefined' && !navigator.onLine) || r.error === true) {\n          assign()\n          return r\n        }\n      } else if (this.strategy === 'stale') {\n        assign()\n      }\n    }\n  }\n\n  clear () {\n    this.store && this.store.clear()\n  }\n\n  getCacheKey (r) {\n    const hash = typeof window !== 'undefined' ? window.btoa : x => x\n    return '$_chimera_' + this.vm.uid + hash([\n      r.requestConfig.url,\n      r.requestConfig.params,\n      r.requestConfig.data,\n      r.requestConfig.method\n    ].join('|'))\n  }\n\n  set store (x) {\n    if (!x || typeof x !== 'object') {\n      this._store = new WebStorageCache({ store: x })\n    } else {\n      this._store = x\n    }\n  }\n\n  get store () {\n    return this._store\n  }\n}\n","import Resource from './Resource'\nimport NullResource from './NullResource'\nimport Cache from './cache'\nimport { createAxios } from './utils'\n\nexport default class VueChimera {\n  constructor (vm, resources, options) {\n    this._vm = vm\n    this._reactiveResources = {}\n    this.options = options || {}\n\n    this.axios = this.options.axios = (!this.options.axios && this._vm.$axios) ? this._vm.$axios : createAxios(this.options.axios)\n    if (this.options.cache) {\n      this.cache = this.options.cache = Cache.from(this.options.cache, this._vm)\n    }\n\n    const vmOptions = this._vm.$options\n    vmOptions.computed = vmOptions.computed || {}\n    vmOptions.watch = vmOptions.watch || {}\n\n    resources = Object.assign({}, resources)\n\n    for (let key in resources) {\n      if (key.charAt(0) === '$' || !resources.hasOwnProperty(key)) continue\n\n      let r = resources[key]\n\n      if (typeof r === 'function') {\n        r = r.bind(this._vm)\n        resources[key] = new NullResource()\n        this._reactiveResources[key] = r\n        vmOptions.computed['$_chimera__' + key] = r\n        vmOptions.watch['$_chimera__' + key] = (t) => this.updateReactiveResource(key, t)\n      } else {\n        resources[key] = Resource.from(r, this.options)\n      }\n      vmOptions.computed[key] = () => resources[key]\n      resources[key].bindListeners(this._vm)\n    }\n\n    Object.defineProperty(resources, '$cancelAll', { value: this.cancelAll.bind(this) })\n    Object.defineProperty(resources, '$axios', { get: () => this.axios })\n    Object.defineProperty(resources, '$loading', {\n      get () {\n        for (let r in this) {\n          if (r.loading) return true\n        }\n        return false\n      }\n    })\n    this.resources = resources\n  }\n\n  updateReactiveResources () {\n    Object.keys(this._reactiveResources).forEach(key => {\n      this.updateReactiveResource(key)\n    })\n  }\n\n  updateReactiveResource (key) {\n    const oldResource = this.resources[key]\n    oldResource.stopInterval()\n    let r = Resource.from(this._reactiveResources[key].call(this._vm), this.options)\n\n    // Keep data\n    if (oldResource.keepData) {\n      r._data = oldResource._data\n      r._status = oldResource._status\n      r._headers = oldResource._headers\n      r._error = oldResource._error\n    }\n\n    r._lastLoaded = oldResource._lastLoaded\n    if (r.prefetch) r.reload()\n    this.resources[key] = r\n  }\n\n  cancelAll () {\n    Object.keys(this.resources).forEach(r => {\n      this.resources[r].cancel()\n    })\n  }\n}\n","import VueChimera from './VueChimera'\nimport { isPlainObject } from './utils'\n\nexport default (config = {}) => ({\n  beforeCreate () {\n    const options = this.$options\n    let _chimera\n\n    // Stop if instance doesn't have chimera or already initialized\n    if (!options.chimera || options._chimera) return\n\n    if (typeof options.chimera === 'function') {\n      // Initialize with function\n      options.chimera = options.chimera.call(this)\n    }\n\n    if (options.chimera instanceof VueChimera) {\n      _chimera = options.chimera\n    } else if (isPlainObject(options.chimera)) {\n      const { $options, ...resources } = options.chimera\n      _chimera = new VueChimera(\n        this, resources, { ...config, ...$options }\n      )\n    }\n\n    options.computed = options.computed || {}\n    options.watch = options.watch || {}\n\n    // Nuxtjs prefetch\n    const NUXT = typeof process !== 'undefined' && process.server && this.$ssrContext\n      ? this.$ssrContext.nuxt\n      : (typeof window !== 'undefined' ? window.__NUXT__ : null)\n    if (_chimera && NUXT && NUXT.chimera) {\n      try {\n        if (this.$router) {\n          let matched = this.$router.match(this.$router.currentRoute.fullPath);\n          (matched ? matched.matched : []).forEach((m, i) => {\n            let nuxtChimera = NUXT.chimera[i]\n            if (nuxtChimera) {\n              Object.keys(_chimera.resources).forEach(key => {\n                let localResource = _chimera.resources[key]\n                let ssrResource = nuxtChimera[key]\n                if (localResource && ssrResource && ssrResource._data) {\n                  [\n                    '_data', '_status', '_headers', 'ssrPrefetched',\n                    '_lastLoaded'].forEach(key => {\n                    localResource[key] = ssrResource[key]\n                  })\n                }\n              })\n            }\n          })\n          // if (process.client) {\n          //   delete NUXT.chimera\n          // }\n        }\n      } catch (e) {}\n    }\n    this._chimera = _chimera\n  },\n\n  data () {\n    if (this._chimera) {\n      return { $chimera: this._chimera.resources }\n    }\n    return {}\n  },\n\n  mounted () {\n    if (this._chimera) {\n      this._chimera.updateReactiveResources()\n      for (let r in this._chimera.resources) {\n        let resource = this._chimera.resources[r]\n        if (resource.prefetch && (!resource.ssrPrefetched || resource.ssrPrefetch === 'override')) {\n          resource.reload()\n        }\n      }\n    }\n  },\n\n  beforeDestroy () {\n    if (!this._chimera) {\n      return\n    }\n\n    this._chimera.cancelAll()\n    this._chimera = null\n    delete this._chimera\n  }\n})\n","import mixin from './mixin'\nimport NuxtPlugin from './NuxtPlugin'\n\nconst plugin = {\n\n  options: {\n    axios: null,\n    cache: null,\n    debounce: 80,\n    prefetch: 'get', // false, true, '%METHOD%',\n    ssrPrefetch: true,\n    ssrPrefetchTimeout: 4000,\n    transformer: null,\n    headers: null\n  },\n\n  install (Vue, options = {}) {\n    Object.keys(options).forEach(key => {\n      if (key in this.options) {\n        this.options[key] = options[key]\n      }\n    })\n\n    if (!Vue.prototype.hasOwnProperty('$chimera')) {\n      Object.defineProperty(Vue.prototype, '$chimera', {\n        get () {\n          if (this._chimera) {\n            return this._chimera.resources\n          }\n          return null\n        }\n      })\n    }\n\n    Vue.mixin(mixin(this.options))\n  },\n\n  NuxtPlugin\n\n}\n\n// Auto-install\nlet GlobalVue = null\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue\n}\n\nif (GlobalVue) {\n  GlobalVue.use(plugin, plugin.options)\n}\n\nexport default plugin\n","import Resource from './Resource'\n\nexport default function () {\n  this.options = this.options || {}\n  const baseOptions = this.options\n\n  return function ({ beforeNuxtRender, isDev, $axios }) {\n    if (!beforeNuxtRender) { return }\n\n    const cancelTokens = []\n    async function prefetchAsyncData ({ Components, nuxtState }) {\n      nuxtState.chimera = nuxtState.chimera || {}\n\n      for (let i = 0, len = Components.length; i < len; i++) {\n        let component = Components[i]\n        let chimera = component.options ? component.options.chimera : null\n\n        if (typeof chimera === 'function') {\n          // Append @Nuxtjs/axios to component (maybe needed by constructor)\n          if ($axios && !component.$axios) component.$axios = $axios\n          chimera = chimera.bind(component)()\n        }\n\n        if (!chimera) { continue }\n\n        const nuxtChimera = {}\n        const { $options, ...resources } = chimera\n        const options = Object.assign({}, baseOptions, $options)\n        if (!options.axios) options.axios = $axios\n\n        for (let key in resources) {\n          let resource = resources[key]\n          if (resource && typeof resource !== 'function') {\n            resource = resource && resource._data ? resource : Resource.from(resource, options)\n            cancelTokens.push(resource.cancel.bind(resource))\n            if (!resource.prefetch || !resource.ssrPrefetch) continue\n            try {\n              isDev && console.log('  Prefetching: ' + resource.requestConfig.url) // eslint-disable-line no-console\n              let response = await resource.execute()\n              resource._data = response.data\n            } catch (err) {\n              isDev && console.error(err.message) // eslint-disable-line no-console\n            }\n            resource.ssrPrefetched = true\n            resources[key] = nuxtChimera[key] = resource\n          }\n        }\n        if (Object.keys(nuxtChimera).length) {\n          nuxtState.chimera[i] = nuxtChimera\n        }\n      }\n    }\n\n    beforeNuxtRender((...args) => {\n      return new Promise((resolve, reject) => {\n        prefetchAsyncData(...args).then(resolve).catch(reject)\n        setTimeout(reject, baseOptions.ssrPrefetchTimeout, new Error('  SSR Prefetch Timeout.'))\n      }).catch(err => {\n        for (let cancel of cancelTokens) if (typeof cancel === 'function') cancel()\n        isDev && console.error(err.message) // eslint-disable-line no-console\n      })\n    })\n  }\n}\n"],"names":["isPlainObject","value","Object","prototype","toString","createAxios","config","request","Axios","create","fn","wait","opts","Number","isFinite","TypeError","leadingVal","timer","resolveList","ctx","this","args","arguments","Promise","resolve","runImmediately","leading","clearTimeout","setTimeout","res","apply","push","CancelToken","EVENT_SUCCESS","EVENT_ERROR","EVENT_CANCEL","EVENT_LOADING","EVENT_TIMEOUT","Resource","baseOptions","Error","url","method","options","cache","assign","constructor","toLowerCase","indexOf","axios","requestConfig","headers","cancelToken","c","_canceler","timeout","undefined","params","_loading","_status","_data","_headers","_error","_lastLoaded","_eventListeners","keepData","ssrPrefetched","cacheHit","prefetch","Boolean","ssrPrefetch","fetchDebounced","pDebounce","fetch","bind","debounce","transformer","setTransformer","setResponseTransformer","response","setErrorTransformer","error","responseTransformer","r","errorTransformer","interval","startInterval","on","key","ms","process","server","_interval","stopInterval","_interval_id","setInterval","reload","clearInterval","event","handler","listeners","bindListeners","obj","keys","forEach","i","emit","force","extraData","reject","cacheResult","assignCache","then","Date","status","data","set","catch","err","strategy","message","isCancel","cancel","execute","send","extra","unload","stop","toJSON","json","NullResource","WebStorageCache","window","store","String","replace","storage","sessionStorage","localStorage","defaultExpiration","getObjectStore","getItem","JSON","parse","setObjectStore","x","setItem","stringify","clear","removeItem","expiration","now","item","length","Cache","vm","get","getCacheKey","navigator","onLine","hash","btoa","uid","join","_store","VueChimera","resources","_vm","_reactiveResources","$axios","from","vmOptions","$options","computed","watch","charAt","hasOwnProperty","t","updateReactiveResource","defineProperty","cancelAll","loading","updateReactiveResources","oldResource","call","beforeCreate","_chimera","chimera","NUXT","$ssrContext","nuxt","__NUXT__","$router","matched","match","currentRoute","fullPath","m","nuxtChimera","localResource","ssrResource","e","$chimera","mounted","resource","beforeDestroy","plugin","ssrPrefetchTimeout","install","Vue","mixin","NuxtPlugin","beforeNuxtRender","isDev","cancelTokens","Components","nuxtState","len","component","console","log","prefetchAsyncData","GlobalVue","global","use"],"mappings":"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"}